{"ast":null,"code":"import React from'react';import{Routes,Route,Navigate}from'react-router-dom';import LoginPage from'./pages/LoginPage';import VisitorCheckInPage from'./pages/VisitorCheckInPage';import HostDashboardPage from'./pages/HostDashboardPage';import AdminDashboardPage from'./pages/AdminDashboardPage';import HomePage from'./pages/HomePage';import ProductPage from'./pages/ProductPage';import ResourcePage from'./pages/ResourcePage';import AboutUsPage from'./pages/AboutUsPage';import BookDemoPage from'./pages/BookDemoPage';import ContactUsPage from'./pages/ContactUsPage';import RegistrationPage from'./pages/RegistrationPage';import MultiVisitorPage from'./pages/MultiVisitorPage';// import ScanCard from './pages/scanCard';\nimport ScanCard1 from'./pages/ScanCard1';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// Retrieve token and user from localStorage\nconst token=localStorage.getItem('token');let user=null;let userRole=null;try{user=JSON.parse(localStorage.getItem('user')||'{}');userRole=user&&user.role?user.role:null;}catch(e){console.error('Error parsing user from localStorage:',e);}// Debug logs\nconsole.log('App.js - Token:',token);console.log('App.js - User:',user);console.log('App.js - User Role:',userRole);if(!token||!user||!userRole){console.log('No token or invalid user data, rendering public routes');localStorage.removeItem('token');// Clear invalid token\nlocalStorage.removeItem('user');// Clear invalid user data\nreturn/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(RegistrationPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/products\",element:/*#__PURE__*/_jsx(ProductPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/resources\",element:/*#__PURE__*/_jsx(ResourcePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/aboutus\",element:/*#__PURE__*/_jsx(AboutUsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/bookademo\",element:/*#__PURE__*/_jsx(BookDemoPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/contactus\",element:/*#__PURE__*/_jsx(ContactUsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/multiVisitor\",element:/*#__PURE__*/_jsx(MultiVisitorPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]});}console.log('Token and userRole present, rendering protected routes');return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/checkin\",element:/*#__PURE__*/_jsx(VisitorCheckInPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/host\",element:/*#__PURE__*/_jsx(HostDashboardPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(AdminDashboardPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/scanCard1\",element:/*#__PURE__*/_jsx(ScanCard1,{})}),/*#__PURE__*/_jsx(Route,{path:\"/multiVisitor\",element:/*#__PURE__*/_jsx(MultiVisitorPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:userRole==='admin'?'/admin':'/host',replace:true})})]});}export default App;","map":{"version":3,"names":["React","Routes","Route","Navigate","LoginPage","VisitorCheckInPage","HostDashboardPage","AdminDashboardPage","HomePage","ProductPage","ResourcePage","AboutUsPage","BookDemoPage","ContactUsPage","RegistrationPage","MultiVisitorPage","ScanCard1","jsx","_jsx","jsxs","_jsxs","App","token","localStorage","getItem","user","userRole","JSON","parse","role","e","console","error","log","removeItem","children","path","element","to","replace"],"sources":["C:/Users/sohan/Desktop/Actually Working/Visitor_management V2/Frontend/src/App.js"],"sourcesContent":["import React from 'react';\r\nimport { Routes, Route, Navigate } from 'react-router-dom';\r\nimport LoginPage from './pages/LoginPage';\r\nimport VisitorCheckInPage from './pages/VisitorCheckInPage';\r\nimport HostDashboardPage from './pages/HostDashboardPage';\r\nimport AdminDashboardPage from './pages/AdminDashboardPage';\r\nimport HomePage from './pages/HomePage';\r\nimport ProductPage from './pages/ProductPage';\r\nimport ResourcePage from './pages/ResourcePage';\r\nimport AboutUsPage from './pages/AboutUsPage';\r\nimport BookDemoPage from './pages/BookDemoPage';\r\nimport ContactUsPage from './pages/ContactUsPage';\r\nimport RegistrationPage from './pages/RegistrationPage';\r\nimport MultiVisitorPage from './pages/MultiVisitorPage';\r\n// import ScanCard from './pages/scanCard';\r\nimport ScanCard1 from './pages/ScanCard1';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  // Retrieve token and user from localStorage\r\n  const token = localStorage.getItem('token');\r\n  let user = null;\r\n  let userRole = null;\r\n  try {\r\n    user = JSON.parse(localStorage.getItem('user') || '{}');\r\n    userRole = user && user.role ? user.role : null;\r\n  } catch (e) {\r\n    console.error('Error parsing user from localStorage:', e);\r\n  }\r\n\r\n  // Debug logs\r\n  console.log('App.js - Token:', token);\r\n  console.log('App.js - User:', user);\r\n  console.log('App.js - User Role:', userRole);\r\n\r\n  if (!token || !user || !userRole) {\r\n    console.log('No token or invalid user data, rendering public routes');\r\n    localStorage.removeItem('token'); // Clear invalid token\r\n    localStorage.removeItem('user'); // Clear invalid user data\r\n    return (\r\n      <Routes>\r\n        <Route path=\"/\" element={<HomePage />} />\r\n        <Route path=\"/login\" element={<LoginPage />} />\r\n        <Route path=\"/register\" element={<RegistrationPage />} />\r\n        <Route path=\"/products\" element={<ProductPage />} />\r\n        <Route path=\"/resources\" element={<ResourcePage />} />\r\n        <Route path=\"/aboutus\" element={<AboutUsPage />} />\r\n        <Route path=\"/bookademo\" element={<BookDemoPage />} />\r\n        <Route path=\"/contactus\" element={<ContactUsPage />} />\r\n        <Route path=\"/multiVisitor\" element={<MultiVisitorPage />} />\r\n        <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\r\n      </Routes>\r\n    );\r\n  }\r\n\r\n  console.log('Token and userRole present, rendering protected routes');\r\n  return (\r\n    <Routes>\r\n      <Route path=\"/checkin\" element={<VisitorCheckInPage />} />\r\n      <Route path=\"/host\" element={<HostDashboardPage />} />\r\n      <Route path=\"/admin\" element={<AdminDashboardPage />} />\r\n     {/* <Route path=\"/scanCard\" element={<ScanCard />} /> */}\r\n      <Route path=\"/scanCard1\" element={<ScanCard1 />} />\r\n      \r\n      {/* Public routes */}\r\n\r\n      <Route path=\"/multiVisitor\" element={<MultiVisitorPage />} />\r\n\r\n      <Route path=\"*\" element={<Navigate to={userRole === 'admin' ? '/admin' : '/host'} replace />} />\r\n    </Routes>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
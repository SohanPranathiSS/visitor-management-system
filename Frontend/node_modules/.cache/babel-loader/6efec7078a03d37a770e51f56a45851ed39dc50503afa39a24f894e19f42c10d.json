{"ast":null,"code":"const API_BASE_URL = 'http://localhost:4000/api';\nconst request = async (endpoint, options = {}) => {\n  const token = localStorage.getItem('token');\n  const headers = {\n    'Content-Type': 'application/json',\n    ...options.headers\n  };\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n    ...options,\n    headers\n  });\n  const contentType = response.headers.get('content-type');\n  if (!contentType || !contentType.includes('application/json')) {\n    throw new Error('Server returned non-JSON response');\n  }\n  const responseData = await response.json();\n  if (!response.ok) {\n    throw new Error(responseData.message || 'An unknown error occurred.');\n  }\n  return responseData;\n};\nexport const loginUser = (email, password) => {\n  return request('/login', {\n    method: 'POST',\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n};\nexport const registerUser = userData => {\n  return request('/register', {\n    method: 'POST',\n    body: JSON.stringify(userData)\n  });\n};\nexport const createUser = userData => {\n  const [firstName, ...lastNameParts] = userData.name.split(' ');\n  const lastName = lastNameParts.join(' ') || '';\n  const registerData = {\n    firstName,\n    lastName,\n    email: userData.email,\n    password: userData.password\n  };\n  return request('/register', {\n    method: 'POST',\n    body: JSON.stringify(registerData)\n  });\n};\nexport const getUsers = () => {\n  return request('/users');\n};\nexport const getVisits = (filters = {}) => {\n  const params = new URLSearchParams(filters);\n  return request(`/host-visits?${params.toString()}`);\n};\nexport const checkInVisitor = checkInData => {\n  return request('/visits', {\n    method: 'POST',\n    body: JSON.stringify(checkInData)\n  });\n};\nexport const checkOutVisit = visitId => {\n  return request(`/visits/${visitId}/checkout`, {\n    method: 'PUT'\n  });\n};","map":{"version":3,"names":["API_BASE_URL","request","endpoint","options","token","localStorage","getItem","headers","response","fetch","contentType","get","includes","Error","responseData","json","ok","message","loginUser","email","password","method","body","JSON","stringify","registerUser","userData","createUser","firstName","lastNameParts","name","split","lastName","join","registerData","getUsers","getVisits","filters","params","URLSearchParams","toString","checkInVisitor","checkInData","checkOutVisit","visitId"],"sources":["C:/Users/sohan/Desktop/Working/Visitor_management Setting Up Database/Frontend/src/utils/apiService.js"],"sourcesContent":["const API_BASE_URL = 'http://localhost:4000/api';\r\n\r\nconst request = async (endpoint, options = {}) => {\r\n  const token = localStorage.getItem('token');\r\n  const headers = {\r\n    'Content-Type': 'application/json',\r\n    ...options.headers,\r\n  };\r\n  if (token) {\r\n    headers['Authorization'] = `Bearer ${token}`;\r\n  }\r\n\r\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, { ...options, headers });\r\n\r\n  const contentType = response.headers.get('content-type');\r\n  if (!contentType || !contentType.includes('application/json')) {\r\n    throw new Error('Server returned non-JSON response');\r\n  }\r\n\r\n  const responseData = await response.json();\r\n\r\n  if (!response.ok) {\r\n    throw new Error(responseData.message || 'An unknown error occurred.');\r\n  }\r\n\r\n  return responseData;\r\n};\r\n\r\nexport const loginUser = (email, password) => {\r\n  return request('/login', {\r\n    method: 'POST',\r\n    body: JSON.stringify({ email, password }),\r\n  });\r\n};\r\n\r\nexport const registerUser = (userData) => {\r\n  return request('/register', {\r\n    method: 'POST',\r\n    body: JSON.stringify(userData),\r\n  });\r\n};\r\n\r\nexport const createUser = (userData) => {\r\n  const [firstName, ...lastNameParts] = userData.name.split(' ');\r\n  const lastName = lastNameParts.join(' ') || '';\r\n  const registerData = {\r\n    firstName,\r\n    lastName,\r\n    email: userData.email,\r\n    password: userData.password,\r\n  };\r\n  return request('/register', {\r\n    method: 'POST',\r\n    body: JSON.stringify(registerData),\r\n  });\r\n};\r\n\r\nexport const getUsers = () => {\r\n  return request('/users');\r\n};\r\n\r\nexport const getVisits = (filters = {}) => {\r\n  const params = new URLSearchParams(filters);\r\n  return request(`/host-visits?${params.toString()}`);\r\n};\r\n\r\nexport const checkInVisitor = (checkInData) => {\r\n  return request('/visits', {\r\n    method: 'POST',\r\n    body: JSON.stringify(checkInData),\r\n  });\r\n};\r\n\r\nexport const checkOutVisit = (visitId) => {\r\n  return request(`/visits/${visitId}/checkout`, {\r\n    method: 'PUT',\r\n  });\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}